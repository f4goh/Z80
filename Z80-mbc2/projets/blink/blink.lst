0001   0000             
0002   0000             #define equ .equ
0003   0000             #define end .end
0004   0000             
0005   0000             USERLED:    equ 00h
0006   0000             
0007   0000             
0008   0000             LOOP:	
0009   0000 3E 00       	LD A, USERLED          ; Opcode pour écrire dans USERLED (0x00)
0010   0002 D3 01           OUT (1), A       
0011   0004 3E 01       	LD A, 1          	; Allume USERLED
0012   0006 D3 00           OUT (0), A       
0013   0008             
0014   0008 CD 19 00        CALL LONG_DELAY       ; Pause 500ms
0015   000B             
0016   000B 3E 00       	LD A, USERLED          ; Opcode pour écrire dans USERLED (0x00)
0017   000D D3 01           OUT (1), A       
0018   000F 3E 00       	LD A, 0          ; Éteint USERLED
0019   0011 D3 00           OUT (0), A       
0020   0013             
0021   0013 CD 19 00        CALL LONG_DELAY       ; Pause 500ms
0022   0016             
0023   0016 C3 00 00        JP LOOP          ; Boucle infinie
0024   0019             
0025   0019             LONG_DELAY:
0026   0019 16 32           LD D, 50       ; compteur externe
0027   001B             EXTERN_WAIT:
0028   001B CD 22 00        CALL DELAY     ; appelle délai de 10 ms
0029   001E 15              DEC D
0030   001F 20 FA           JR NZ, EXTERN_WAIT
0031   0021 C9              RET
0032   0022             	
0033   0022             ; --- Sous-programme DELAY 10ms ---
0034   0022             DELAY:
0035   0022 01 81 06    	LD BC, 1665      ; Charge le compteur de boucle dans BC
0036   0025             WAIT:
0037   0025 0B              DEC BC           ; Décrémente le compteur
0038   0026 78              LD A, B          ; Charge B dans A
0039   0027 B1              OR C             ; Combine avec C — si BC != 0, résultat ≠ 0
0040   0028 20 FB           JR NZ, WAIT      ; Si BC ≠ 0, on recommence
0041   002A C9              RET              ; Sinon, on revient au programme principal
0042   002B             
0043   002B             	end
0044   002B             		

ADDR  00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F
-----------------------------------------------------
0000  3E 00 D3 01 3E 01 D3 00 CD 19 00 3E 00 D3 01 3E
0010  00 D3 00 CD 19 00 C3 00 00 16 32 CD 22 00 15 20
0020  FA C9 01 81 06 0B 78 B1 20 FB C9 00 00 00 00 00


tasm: Number of errors = 0
